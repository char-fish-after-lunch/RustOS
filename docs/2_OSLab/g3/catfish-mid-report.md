# Rust OS多核移植与基于PARD框架的线程级Label管理 中期实现文档

2015011251 王纪霆

## 工作进度

### smp on RV32

做了启动riscv32的部分，但启动后的进程调度由于与平台无关，因此由wrj同学完成，该部分见wrj的报告。

实际上做的东西很少，因为bbl里已经掩藏了一些底层细节。

+ 原子指令的workaround：将原子操作的实现移到c文件里，编译完后和rust链接，绕过了rust llvm不能支持原子指令的问题
+ 核数的获取：rust不支持编译时定义宏，只支持boolean性质的feature，所以修改了一下bbl，往bootloader中传进了从dtb里读到的核数。
+ 多核内核栈和hart id的设置：基本参照smp for uCore+ on riscv64

### pard

昨天(2018.10.29)yzh老师终于大致完成了新版本在zedboard上的适配，也把之前因不完善没放出来的一些代码放出来了。

正在重现，目前还没遇到问题。严格意义上来说接下来才是刚刚开始。

由于基本没有进展，所以状况和之前一样。